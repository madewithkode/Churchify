<!DOCTYPE html>
<html class="no-js" lang="en">
<head>

    <!--- basic page needs
    ================================================== -->
    <meta charset="utf-8">
    <title>Caregroup Panel |Churchify Portal|</title>
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- mobile specific metas
    ================================================== -->
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- CSS
    ================================================== -->
    <link rel="stylesheet" type="text/css" href="static/css/login-form.css">
    <link rel="stylesheet" href="static/css/base.css">
    <link rel="stylesheet" href="static/css/main.css">
    <link rel="stylesheet" href="static/css/bootstrap/bootstrap.min.css">
    <!-- script
    ================================================== -->
    <script src="static/js/modernizr.js"></script>
    <script src="static/js/pace.min.js"></script>
    <script src="static/js/bootstrap.min.js"></script>
    <script src="http://code.jquery.com/jquery-1.11.0.min.js"></script>
    <script src="static/js/jquery-3.2.1.min.js"></script>
    

    <!-- favicons
    ================================================== -->
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
    <link rel="icon" href="favicon.ico" type="image/x-icon">

</head>

<body id="top">
    <!-- header
    ================================================== -->
    <header class="s-header">

        <div class="header-logo">
            <a class="site-logo" href="/">
                <h1 class="force-logo" style="color:white;">
                    Churchify Portal 
                </h1>
                <!--<img src="static/images/logo.svg" alt="Homepage">-->
            </a>
        </div> <!-- end header-logo -->

        <nav class="header-nav">

            <a href="#0" class="header-nav__close" title="close"><span>Close</span></a>

            <div class="header-nav__content">
                <h3>Churchify Portal</h3>
                
                <ul class="header-nav__list">
                    <li class="current"><a href="/" title="Home">Home</a></li>
                    <li><a href="admin-login" title="Admin">Admin</a></li>
                    <li><a href="/deacon-login" title="Deacon">Deacon</a></li>
                    <li><a href="cd-login" title="Coordinator">Coordinator</a></li>
                    <li><a href="cg-logout" title="Logout">Logout</a></li>
                </ul>
    
                <p>Perspiciatis hic praesentium nesciunt. Et neque a dolorum <a href='#0'>voluptatem</a> porro iusto sequi veritatis libero enim. Iusto id suscipit veritatis neque reprehenderit.</p>
    
                <ul class="header-nav__social">
                    <li>
                        <a href="#0"><i class="fab fa-facebook"></i></a>
                    </li>
                    <li>
                        <a href="#0"><i class="fab fa-twitter"></i></a>
                    </li>
                    <li>
                        <a href="#0"><i class="fab fa-instagram"></i></a>
                    </li>
                    <li>
                        <a href="#0"><i class="fab fa-behance"></i></a>
                    </li>
                    <li>
                        <a href="#0"><i class="fab fa-dribbble"></i></a>
                    </li>
                </ul>

            </div> <!-- end header-nav__content -->

        </nav> <!-- end header-nav -->

        <a class="header-menu-toggle" href="#0">
            <span class="header-menu-icon"></span>
        </a>

    </header> <!-- end s-header -->


    <!-- home
    ================================================== -->
    <section id="home" class="s-home target-section" data-parallax="scroll" data-image-src="static/images/sarah2.jpg" data-natural-width=3000 data-natural-height=2000 data-position-y=top>

        <div class="shadow-overlay"></div>

        <div class="home-content">

            <div class="my-row home-content__main">
                <h1>
                Welcome {{ name }} 
                </h1>

            </div> <!-- end home-content__main -->

        </div> <!-- end home-content -->

        <ul class="home-sidelinks">
            <li><a href="/admin-login">Admin<span></span></a></li>
            <li><a href="/deacon-login">Deacon<span></span></a></li>
            <li><a href="/cd-login">Coordinator<span></span></a></li>
            <li><a href="/cg-logout">Logout<span></span></a></li>
        </ul> <!-- end home-sidelinks -->

        <ul class="home-social">
            <li class="home-social-title">Follow Us</li>
            <li><a href="#0">
                <i class="fab fa-facebook"></i>
                <span class="home-social-text">Facebook</span>
            </a></li>
            <li><a href="#0">
                <i class="fab fa-twitter"></i>
                <span class="home-social-text">Twitter</span>
            </a></li>
            <li><a href="#0">
                <i class="fab fa-linkedin"></i>
                <span class="home-social-text">LinkedIn</span>
            </a></li>
        </ul> <!-- end home-social -->

        <a href="#about" class="home-scroll smoothscroll">
            <span class="home-scroll__text">Scroll Down</span>
            <span class="home-scroll__icon"></span>
        </a> <!-- end home-scroll -->

    </section> <!-- end s-home -->

    <section class="tab-section">
            <div class="tab">
                <button class="tablinks" onclick="openCity(event, 'London')" id="defaultOpen">Latest Visitors(Yet to visit)</button>
                <button class="tablinks" onclick="openCity(event, 'Paris')">Visitors(Visited)</button>
            </div>
              
            <div id="London" class="tabcontent table-responsive container-fluid">
                    <h2 class="text-center" style="color:black;">You Are Yet To Visit These Persons</h2>
                    <table  class="table-bordered table">
                        <thead>
                            <tr>
                            <th>Fullname</th>
                            <th>Sex</th>
                            <th>Age</th>
                            <th>Phone</th>
                            <th>Address</th>
                            <th>Visitor</th>
                            <th>Counselee</th>
                            <th>Visited</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for row in data %}
                            <tr>
                                {% for d in row  %}
                                    <td>{{ d }}</td>
                                {% endfor %}
                            <td>
                                <form class="form">
                                <input name="{{row[0:1]|replace('(', '')|replace(')','')|replace(',',' ')}}" style="display:inline-block;" id="{{ row[0:1] }}" placeholder="Remarks" class="form-control">
                                
                                    <button id="assign"  class="btn btn-success assignBtn" style="display:inline-block; padding-top: 0.375rem;margin-top: 10px; height:25px;"><i class="fa fa-check"></i>Confirm Visited</button>
                                </form>
                            </td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                    <div class="text-center">
                        <input id="refresh" onclick="location.reload(true)" type="button" value="Refresh">
                    </div> 
            </div>
              
            <div id="Paris" class="tabcontent table-responsive container-fluid">
                <h2 class="text-center" style="color:black;">You Have Visited These Persons</h2>
                <table class="table table-bordered">
                    <thead>
                        <tr>
                        <th>Fullname</th>
                        <th>Sex</th>
                        <th>Age</th>
                        <th>Phone</th>
                        <th>Address</th>
                        <th>Visitor</th>
                        <th>Counselee</th>
                        <th>Prayer Need</th>
                        <th>Visit Status</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for row in oldVisitors %}
                            <tr>
                                {% for c in row  %}
                                    <td>{{ c }}</td>
                                {% endfor %}
                            </tr>
                        {% endfor %}
                    </tbody>
                </table>
                <div class="text-center">
                    <input id="refresh" onclick="location.reload(true)" type="button" value="Refresh">
                </div>  
              </div>
        </section>

    <!-- stats
    ================================================== -->
    <section id="stats" class="s-stats">

        <div class="row stats block-1-4 block-m-1-2 block-mob-full" data-aos="fade-up">
                
            <div class="col-block stats__col ">
                <div class="stats__count">{{totalVisitors}}</div>
                    <h5>Visitor(s) Received</h5>
                </div>
                <div class="col-block stats__col">
                    <div class="stats__count">{{totalCounselees}}</div>
                    <h5>Counselee(s) Received</h5>
                </div>
                <div class="col-block stats__col">
                    <div class="stats__count">{{totalVisits}}</div>
                    <h5>Success Follow-Ups</h5>
                </div>
                <div class="col-block stats__col">
                    <div class="stats__count">{{totalNotVisited}}</div>
                    <h5>Unsuccessful Follow-Ups</h5> 
                </div>

        </div> <!-- end stats -->

    </section> <!-- end s-stats -->
    
    <!-- preloader
    ================================================== -->
    <div id="preloader">
        <div id="loader">            
        </div>
    </div>

    <script>
        $(document).ready(function() { 
            let forms = $('.form');
            //$('#newID').attr('id', 'form');
            $(forms).on('submit',function (e) {
                var submit = $(this).find(':submit');
                //$(this).find(assignBtn).prop("disabled",true);
                var url = "/confirm-visit"; // send the form data here.
                $.ajax({
                    type: "POST",
                    url: url,
                    data: JSON.stringify($(this).serialize()), // serializes the form's elements.
                    dataType: "json",
                    contentType : "application/json",
                    success: function (data) {
                        //$('#form').attr('id', 'newID');
                        console.log(data)
                        $(submit).text( "Visited" );
                        $(submit).attr('disabled',true);
                          // display the returned data in the console.
                        //$('.form').attr('class', 'currentform');
                        //$(firstForm).attr('class', 'previousform');
                        //$(firstForm).nextAll('form').attr('class', 'form');
                    }
                });
            e.preventDefault(); // block the traditional submission of the form.
        });
    // Inject our CSRF token into our AJAX request.

    });
    </script>
    <!-- Java Script
    ================================================== -->
    <script src="static/js/jquery-3.2.1.min.js"></script>
    <script src="static/js/plugins.js"></script>
    <script src="static/js/main.js"></script>
    <script src="static/js/tabbed-form.js"></script>
    
    
<!--===============================================================================================-->

</body>

</html>